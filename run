#!/bin/sh

# first check that we are in an appropriate runlevel rlevel=$(runlevel | cut -d " " -f 2) if [[ "$rlevel" != "2" && "$rlevel" != "3" ]] then echo "ERROR: You must be at runlevel 2 or 3" exit 1 fi

Color='\033[0;33m'
NoColor='\033[0m'

echo -e "${Color}plymouth://process/start${NoColor}"
plymouthd --no-daemon --debug > daemon.log 2>&1 &
sleep 1 &&
    plymouth --ping &&
    echo -e "${Color}plymouth://process/ping ${NoColor}" &&
    plymouth --show-splash &&
    sleep 3 &&
    echo -e "${Color}plymouth://process/output --type message ${NoColor}" &&
    plymouth display-message &&
    echo -e "${Color}plymouth://process/stop ${NoColor}" &&
    plymouth --quit &&
    echo "plymouth://done"

# sudo update-alternatives --install /usr/share/plymouth/themes/default.plymouth default.plymouth /usr/share/plymouth/themes/darwin/darwin.plymouth 100
# sudo update-alternatives --config default.plymouth
# sudo update-initramfs -u
# plymouthd --no-daemon --debug

# `Transition` config in `two-step` animation piece code from https://gitlab.freedesktop.org/plymouth/plymouth
#  if (strcmp (transition, "fade-over") == 0)
#        plugin->transition = PLY_PROGRESS_ANIMATION_TRANSITION_FADE_OVER;
#    else if (strcmp (transition, "cross-fade") == 0)
#        plugin->transition = PLY_PROGRESS_ANIMATION_TRANSITION_CROSS_FADE;
#    else if (strcmp (transition, "merge-fade") == 0)
#        plugin->transition = PLY_PROGRESS_ANIMATION_TRANSITION_MERGE_FADE;
